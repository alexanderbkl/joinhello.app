{"version":3,"sources":["assets/logo.png","assets/file.png","assets/ounn.png","App.js","Home copy.js","LogIn.js","SigIn.js","Settings.js","FileInfo.js","assets/filePublic.png","assets/folder.png","assets/upload_button.png","assets/Instagram.png","assets/linkedin.png","config.js"],"names":["module","exports","TextEncodingPolyfill","require","global","TextEncoder","TextDecoder","Stack","createNativeStackNavigator","App","Navigator","Screen","name","component","LogIn","options","headerShown","SigIn","Home","FileInfo","Settings","axios","default","mutexFoto","controllerFetch","AbortController","controllerFetchDownload","web3s","Web3Storage","token","config","Web3StorageToken","abortController","route","navigation","winSize","useWindowDimensions","db","getFirestore","auth","getAuth","React","images","setImages","folders","setFolders","stackDir","setStackDir","value","total","progressValue","setProgressValue","spinnerVisible","setSpinnerVisibile","reload","setReload","menuOpen","setMenuOpen","current","numFile","setNumFile","elementoSelezionato","setElementoSelezionato","valueModal","setValueModal","aggiornaFoto","newPhotoId","Promise","resolve","reject","a","async","getDocs","query","collection","params","email","replaceAll","orderBy","where","data","listFold","j","oldFolders","id","docs","length","i","includes","filter","obj","item","cid","type","size","ranHeightImage","Math","random","undefined","width","hp","notPrivate","err","oldArray","then","modalita","menuSelection","menuSelectionFolder","openImagePickerAsync","selectedResult","response","confirm","errorLoading","filebuffer","enc","passwordKey","password","window","crypto","subtle","importKey","encode","key","iv","arrayBuffer","encrypt","idFile","caricato","file","File","put","wrapWithDirectory","onStoredChunk","floor","json","addDoc","Date","now","substring","lastIndexOf","dir","el","catch","alert","deleteDoc","doc","console","log","createFolder","nameFolder","prompt","copy","push","newImages","splice","indexOf","win","test","navigator","userAgent","open","document","write","addEventListener","ev","abort","get","signal","responseType","onDownloadProgress","event","getElementById","innerHTML","loaded","createElement","blob","Blob","url","URL","createObjectURL","setAttribute","body","append","click","revokeObjectURL","remove","message","decrypt","decifrato","location","href","newName","trim","newObject","estenzione","slice","updateDoc","controllo1","controllo2","newFolders","oldStack","Item","onPress","style","padding","flexDirection","alignItems","source","cacheKey","aspectRatio","height","borderRadius","alignSelf","color","fontWeight","marginLeft","toFixed","toLocaleString","flex","Itemfolder","colors","position","left","right","top","start","x","y","end","resizeMode","marginTop","marginBottom","uri","visible","transparent","backgroundColor","justifyContent","textAlign","fontSize","zIndex","isOpen","cursor","items","label","onMenuToggle","onItemPress","index","renderItemIcon","AsyncStorage","clear","signOut","textStyle","children","progress","onChange","target","files","accept","display","multiple","for","newStack","pop","borderWidth","borderColor","margin","showsVerticalScrollIndicator","numColumns","renderItem","keyExtractor","itemFolders","app","initializeApp","firebaseConfig","setEmail","setPassword","getItem","credentials","JSON","parse","credentialsJson","signInWithEmailAndPassword","userCredential","error","onChangeText","text","textContentType","placeholder","secureTextEntry","passwordRules","setItem","stringify","nome","setNome","cognome","setCognome","createUserWithEmailAndPassword","setDoc","goBack","contentContainerStyle","stato","setStato","deals","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId"],"mappings":"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","file":"static/js/app.b5713a82.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.deaa9c5a.png\";","module.exports = __webpack_public_path__ + \"static/media/file.73e9524a.png\";","module.exports = __webpack_public_path__ + \"static/media/ounn.ad2c5e49.png\";","import { StatusBar } from \"expo-status-bar\";\r\nimport * as React from \"react\";\r\nimport { View, Text } from \"react-native\";\r\nimport { NavigationContainer } from \"@react-navigation/native\";\r\nimport { createNativeStackNavigator } from \"@react-navigation/native-stack\";\r\nimport Home from \"./Home copy\";\r\nimport LogIn from \"./LogIn\";\r\nimport SigIn from \"./SigIn\";\r\nimport Settings from \"./Settings\";\r\nimport FileInfo from \"./FileInfo\";\r\n\r\nconst TextEncodingPolyfill = require('text-encoding');\r\n\r\nObject.assign(global, {\r\n  TextEncoder: TextEncodingPolyfill.TextEncoder,\r\n  TextDecoder: TextEncodingPolyfill.TextDecoder,\r\n});\r\n\r\n\r\nconst Stack = createNativeStackNavigator();\r\n\r\nexport default function App() {\r\n  return (\r\n    <NavigationContainer>\r\n      <Stack.Navigator>\r\n        <Stack.Screen\r\n          name=\"LogIn\"\r\n          component={LogIn}\r\n          options={{ headerShown: false }}\r\n        />\r\n        <Stack.Screen\r\n          name=\"SigIn\"\r\n          component={SigIn}\r\n          options={{ headerShown: false }}\r\n        />\r\n        <Stack.Screen\r\n          name=\"Home\"\r\n          component={Home}\r\n          options={{ headerShown: false }}\r\n        />\r\n        <Stack.Screen\r\n          name=\"FileInfo\"\r\n          component={FileInfo}\r\n          options={{ headerShown: false }}\r\n        />\r\n        <Stack.Screen\r\n          name=\"Settings\"\r\n          component={Settings}\r\n          options={{ headerShown: false }}\r\n        />\r\n      </Stack.Navigator>\r\n    </NavigationContainer>\r\n  );\r\n}\r\n","import { StatusBar } from \"expo-status-bar\";\r\nimport * as React from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  Image,\r\n  TouchableOpacity,\r\n  useWindowDimensions,\r\n  ActivityIndicator,\r\n  FlatList,\r\n  ScrollView,\r\n  Modal,\r\n  Alert,\r\n} from \"react-native\";\r\nimport { NavigationContainer } from \"@react-navigation/native\";\r\nimport { createNativeStackNavigator } from \"@react-navigation/native-stack\";\r\nimport {\r\n  widthPercentageToDP as wp,\r\n  heightPercentageToDP as hp,\r\n} from \"react-native-responsive-screen\";\r\nimport * as ImagePicker from \"expo-image-picker\";\r\nimport {\r\n  addDoc,\r\n  doc,\r\n  collection,\r\n  getFirestore,\r\n  getDocs,\r\n  query,\r\n  deleteDoc,\r\n  orderBy,\r\n  startAfter,\r\n  limit,\r\n  startAt,\r\n  endBefore,\r\n  updateDoc,\r\n  setDoc,\r\n  getDoc,\r\n  where,\r\n  increment,\r\n} from \"firebase/firestore/\";\r\nimport { signOut, getAuth } from \"firebase/auth\";\r\nimport {\r\n  Menu,\r\n  MenuOptions,\r\n  MenuOption,\r\n  MenuTrigger,\r\n  MenuProvider,\r\n} from \"react-native-popup-menu\";\r\nvar aesjs = require(\"aes-js\");\r\nimport Spinner from \"react-native-loading-spinner-overlay\";\r\nconst axios = require(\"axios\").default;\r\nimport * as Progress from \"react-native-progress\";\r\n/*import { TreewalkCarSplitter } from \"carbites/treewalk\";\r\nimport { CarReader } from \"@ipld/car\";\r\nimport { CarWriter } from \"@ipld/car/lib/writer-browser\";\r\nimport { pack } from \"ipfs-car/dist/esm/pack\";\r\nimport { packToBlob } from \"ipfs-car/dist/esm/pack/blob\";\r\nimport { MemoryBlockStore } from \"ipfs-car/dist/esm/blockstore/memory\";\r\nimport { NFTStorage } from \"nft.storage\";\r\nimport { Blockstore } from \"nft.storage/src/platform\";\r\nimport { BlockstoreCarReader } from \"nft.storage/src/bs-car-reader\";\r\nimport { transform } from \"streaming-iterables\";*/\r\nimport { FloatingMenu } from \"react-native-floating-action-menu\";\r\nimport Icon from \"react-native-vector-icons/MaterialCommunityIcons\";\r\nimport config from \"./config\";\r\nimport { Web3Storage, File } from 'web3.storage/dist/bundle.esm.min.js'\r\nimport copy from \"copy-to-clipboard\";\r\nimport { LinearGradient } from 'expo-linear-gradient';\r\n\r\nlet mutexFoto = false;\r\nlet controllerFetch = new AbortController();\r\nlet controllerFetchDownload = new AbortController();\r\n//ho modificato il costruttore in modo da accettare l'abort controller per poter annullare il caricamento\r\nlet web3s = new Web3Storage({\r\n  token: config.Web3StorageToken,\r\n  abortController: controllerFetch,\r\n});\r\n\r\nconst Home = ({ route, navigation }) => {\r\n  //per dimensioni finestra in real time\r\n  const winSize = useWindowDimensions();\r\n\r\n  //inizializzo databse e autenticazione firebase\r\n  const db = getFirestore();\r\n  const auth = getAuth();\r\n\r\n  //state con array di immagini da caricare\r\n  let [images, setImages] = React.useState([]);\r\n\r\n  //state con array di cartelle da caricare\r\n  let [folders, setFolders] = React.useState([]);\r\n\r\n  //state per gestire cartelle\r\n  let [stackDir, setStackDir] = React.useState([\"Photos\"]);\r\n\r\n  //state per gestire barra caricamento\r\n  let [progressValue, setProgressValue] = React.useState({\r\n    value: 0,\r\n    total: 100,\r\n  });\r\n\r\n  //inizializzo overlay caricamento\r\n  let [spinnerVisible, setSpinnerVisibile] = React.useState(false);\r\n\r\n  //per non mostrare pulsante durante reload e primo caricamento\r\n  let [reload, setReload] = React.useState(false);\r\n\r\n  //state apertura menu\r\n  let [menuOpen, setMenuOpen] = React.useState(false);\r\n\r\n  //numero file da caricare\r\n  let [numFile, setNumFile] = React.useState({ current: 0, total: 0 });\r\n\r\n  //per gestire poi il modal del menu del file o cartella\r\n  let [elementoSelezionato, setElementoSelezionato] = React.useState({});\r\n\r\n  //per selezionare il modal da mostrare 1=file 2 =folders 0=niente\r\n  let [valueModal, setValueModal] = React.useState(0);\r\n\r\n\r\n\r\n\r\n  let aggiornaFoto = function (newPhotoId) {\r\n    return new Promise(async (resolve, reject) => {\r\n      if (!mutexFoto) {\r\n        mutexFoto = true;\r\n\r\n        //prendo i cid da firebase prendo il zip dall url ipfs + cid lo unzippo e creo il blob per mostrarlo\r\n        let data = await getDocs(\r\n          query(\r\n            collection(\r\n              db,\r\n              \"Utenti\",\r\n              route.params.email.replaceAll(\".\", \"DOT\"),\r\n              \"Photos\"\r\n            ),\r\n            orderBy(\"data\", \"desc\"),\r\n            where(\"dir\", \"==\", stackDir)\r\n          )\r\n        );\r\n\r\n        //carico cartelle\r\n        setFolders([]);\r\n        let listFold = await getDocs(\r\n          query(\r\n            collection(\r\n              db,\r\n              \"Utenti\",\r\n              route.params.email.replaceAll(\".\", \"DOT\"),\r\n              \"folders\"\r\n            ),\r\n            where(\"dir\", \"==\", stackDir)\r\n          )\r\n        );\r\n\r\n        //carico nome cartelle nello state\r\n        for (let j = 0; j < listFold.docs.length; j++) {\r\n          setFolders((oldFolders) => [\r\n            ...oldFolders,\r\n            {\r\n              id: listFold.docs[j].id,\r\n              name: listFold.docs[j].data().name,\r\n              data: listFold.docs[j].data().data,\r\n            },\r\n          ]);\r\n        }\r\n\r\n        //uso questa i per sbloccare il mutex solo quando il fetch ha finito e sono state caricate\r\n        //tutte le foto\r\n        let i = 0;\r\n\r\n        //sblocco il mutex se se è vuota la lista\r\n        if (data.docs.length == 0) resolve();\r\n\r\n        for (i; i < data.docs.length; i++) {\r\n          //controllo se non è già presente nello state altrimenti ogni volta ad esempio che carichi un nuova foto\r\n          //ricarica tutto\r\n          if (\r\n            !images.includes(\r\n              images.filter((obj) => obj.id === data.docs[i].id)[0]\r\n            )\r\n          ) {\r\n            let item = {\r\n              cid: data.docs[i].data().cid,\r\n              data: data.docs[i].data().data,\r\n              id: data.docs[i].id,\r\n              name: data.docs[i].data().name,\r\n              type: data.docs[i].data().type,\r\n              size: data.docs[i].data().size,\r\n              //Assegno un altezza a caso per il rendering\r\n              ranHeightImage:\r\n                Math.random() < 0.5\r\n                  ? undefined\r\n                  : winSize.width < 900\r\n                    ? hp(\"20%\")\r\n                    : hp(\"25%\"),\r\n            };\r\n            try {\r\n              item.notPrivate = data.docs[i].data().notPrivate;\r\n            } catch (err) { }\r\n\r\n            //se viene aggiunta una nuova immagine la metto all'inizio dellarray e poi esco dal for\r\n            //in modo che carico solo le nuove immagini e non ripeteo il caricamento delle altre gia presenti\r\n            if (data.docs[i].id == newPhotoId) {\r\n              setImages((oldArray) => [item, ...oldArray]);\r\n              i = data.docs.length;\r\n            } else {\r\n              setImages((oldArray) => [...oldArray, item]);\r\n            }\r\n\r\n            //sblocco il mutex se sono state caricate tutte le foto\r\n            if (data.docs.length - 1 == i) {\r\n              resolve();\r\n            }\r\n          } else {\r\n            //se è gia presente l'immagine\r\n\r\n            //sblocco il mutex se sono state caricate tutte le foto\r\n            if (data.docs.length - 1 == i) {\r\n              resolve();\r\n            }\r\n          }\r\n        }\r\n      }\r\n      resolve();\r\n    });\r\n  };\r\n\r\n  //Eseguito Appena si apre la pagina e quando premo pulsante reload\r\n  React.useEffect(async () => {\r\n    if (images.length == 0) {\r\n      setSpinnerVisibile(true);\r\n      setReload(true);\r\n      aggiornaFoto().then(() => {\r\n        mutexFoto = false;\r\n        setSpinnerVisibile(false);\r\n        setReload(false);\r\n      });\r\n    }\r\n  }, [images]);\r\n\r\n  //eseguito quando cambia elemento selezionato\r\n  React.useEffect(() => {\r\n    //per gestire il click diretto sul file o sulla cartella, senza passare per il modal\r\n    if (elementoSelezionato.modalita == \"diretta\") {\r\n      if (elementoSelezionato.size != undefined) menuSelection(1);\r\n      else menuSelectionFolder(3);\r\n    }\r\n  }, [elementoSelezionato]);\r\n\r\n  //picker immagini\r\n  let openImagePickerAsync = async (selectedResult) => {\r\n    //alert per scelta upload files pubblici o privati\r\n    let response = confirm(\r\n      \"Do you want upload private (encrypted) or public (not encrypted) files? ('OK' for private, 'Cancel' for public)\"\r\n    );\r\n\r\n    //per alert conferma caricamento tutti i file\r\n    let errorLoading = false;\r\n\r\n    for (let i = 0; i < selectedResult.length; i++) {\r\n      //metto rotellina\r\n      setReload(true);\r\n      //metto overlay caricamneto\r\n      setSpinnerVisibile(true);\r\n      //per segnare durante il caricamento quale file si sta caricando\r\n      setNumFile({ current: i + 1, total: selectedResult.length });\r\n\r\n      //se è privato lo cifro altrimenti non lo cifro\r\n      let filebuffer;\r\n      if (response) {\r\n        let enc = new TextEncoder();\r\n        //allungo la password inserendo k perchè deve essere almeno essere lunga 16 per generare la chiave\r\n        let passwordKey = route.params.password;\r\n        while (passwordKey.length < 16) passwordKey += \"k\";\r\n\r\n        //genero key con la password\r\n        let key = await window.crypto.subtle.importKey(\r\n          \"raw\",\r\n          enc.encode(passwordKey),\r\n          \"AES-GCM\",\r\n          false,\r\n          [\"encrypt\", \"decrypt\"]\r\n        );\r\n\r\n        //cifro il file\r\n        filebuffer = await window.crypto.subtle.encrypt(\r\n          { name: \"AES-GCM\", iv: enc.encode(passwordKey) },\r\n          key,\r\n          await selectedResult[i].arrayBuffer()\r\n        );\r\n      } else {\r\n        filebuffer = await selectedResult[i].arrayBuffer();\r\n      }\r\n\r\n      //levo rotellina\r\n      setReload(false);\r\n      //resetto la progress bar\r\n      setProgressValue({ value: 0, total: 100 });\r\n\r\n      //id file per il catch\r\n      let idFile;\r\n\r\n      try {\r\n        /*let json;\r\n        if ((selectedResult[i].size / 1000000).toFixed(2) < 100) {\r\n          json = await axios.request({\r\n            url: \"https://api.web3.storage/upload\",\r\n            method: \"POST\",\r\n            signal: controllerFetch.signal,\r\n            headers: {\r\n              Authorization: \"Bearer \" + config.Web3StorageToken,\r\n            },\r\n            data: cifrato,\r\n            onUploadProgress: (prog) => {\r\n              setProgressValue({ value: prog.loaded, total: prog.total });\r\n            },\r\n          });\r\n        } else {\r\n          /* let BlobCifrato = new Blob([cifrato]);\r\n            const blockstore = new Blockstore();\r\n            const { root: cid } = await pack({\r\n              input: [{ path: \"blob\", content: BlobCifrato.stream() }],\r\n              blockstore: blockstore,\r\n              wrapWithDirectory: false,\r\n            });\r\n            const car = new BlockstoreCarReader(1, [cid], blockstore);\r\n\r\n            const targetSize = 1024 * 1024 * 10;\r\n            const splitter =\r\n              car instanceof Blob\r\n                ? await TreewalkCarSplitter.fromBlob(car, targetSize)\r\n                : new TreewalkCarSplitter(car, targetSize);\r\n\r\n            //li uso per la barra di caricamento\r\n            let counterCars = 0;\r\n            for await (const cid of splitter.cars()) {\r\n              counterCars++;\r\n            }\r\n            let caricati = 0;\r\n\r\n            const upload = transform(3, async function (car) {\r\n              const carParts = [];\r\n              for await (const part of car) {\r\n                carParts.push(part);\r\n              }\r\n              const carFile = new Blob(carParts, { type: \"application/car\" });\r\n\r\n              const response = await axios.request({\r\n                onUploadProgress: (event) => {\r\n                  setProgressValue({\r\n                    value: event.loaded,\r\n                    total: event.total,\r\n                  });\r\n                },\r\n                url: /*\"https://api.nft.storage/upload\"*/\r\n        /* \"https://api.web3.storage/car\",\r\n                method: \"POST\",\r\n                signal: controllerFetch.signal,\r\n                headers: {\r\n                  \"content-Type\": \"application/car\",\r\n                  Authorization:*/\r\n        /*\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDgyNTY0MzFEQUYwMjU4MEFENTU5NDU2NDc0OURhQWJCZTY5NWUzRjkiLCJpc3MiOiJuZnQtc3RvcmFnZSIsImlhdCI6MTY0Mjg3NjE3NTM0OCwibmFtZSI6ImRzdG9yYWdlIn0.TeG3_YYxhZeWtzpPPNxoietTB0yezr_Pqvq30yjao5w\",*/\r\n        /* \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDg3RTZiZDFhYTUyOUNmYWRmOURhMGY0NTNiMEE4ZDlGRDM3MjM2ZUIiLCJpc3MiOiJ3ZWIzLXN0b3JhZ2UiLCJpYXQiOjE2NDU0NTQ1NTcyNjUsIm5hbWUiOiJEUGhvdG8ifQ.WM4zuZ9UuGwODetDm37xMmpPLkCXXai-wAxw9Opf7Yk\",\r\n                },\r\n                data: carFile,\r\n              });\r\n\r\n              return response.data.value.cid;\r\n            });\r\n\r\n            let root;\r\n            for await (const cid of upload(splitter.cars())) {\r\n              //aggiorno progresso caricamento\r\n              caricati = caricati + 1;\r\n              setProgressValue({ value: caricati, total: counterCars });\r\n              root = cid;\r\n            }\r\n\r\n            json = cid.toString();*/\r\n\r\n        /* let BlobCifrato = new Blob([cifrato]);\r\n          const blockstore = new Blockstore();\r\n          const { root: cid, out: iterable } = await pack({\r\n            input: [{ path: \"blob\", content: BlobCifrato.stream() }],\r\n            blockstore: blockstore,\r\n            wrapWithDirectory: false,\r\n          });\r\n          const car = await CarReader.fromIterable(iterable);\r\n          const targetSize = 100000000;\r\n          const splitter = new TreewalkCarSplitter(car, targetSize);\r\n\r\n          //li uso per la barra di caricamento\r\n          let counterCars = Math.floor(BlobCifrato.size / targetSize);\r\n          let caricati = 0;\r\n          console.log(counterCars);\r\n\r\n          const upload = transform(3, async function (smallCar) {\r\n            const carParts = [];\r\n            for await (const part of smallCar) {\r\n              carParts.push(part);\r\n            }\r\n            const carFile = new Blob(carParts, { type: \"application/car\" });\r\n\r\n            const response = await axios.request({\r\n              url: \"https://api.web3.storage/car\",\r\n              method: \"POST\",\r\n              signal: controllerFetch.signal,\r\n              headers: {\r\n                \"content-Type\": \"application/car\",\r\n                Authorization: \"Bearer \" + config.Web3StorageToken,\r\n              },\r\n              data: carFile,\r\n            });\r\n          });\r\n\r\n          for await (const cid of upload(splitter.cars())) {\r\n            //aggiorno progresso caricamento\r\n            caricati = caricati + 1;\r\n            setProgressValue({ value: caricati, total: counterCars });\r\n          }\r\n\r\n        json = cid.toString();\r\n         }*/\r\n\r\n        //carico file su web3.storage\r\n        let caricato = 0;\r\n        const file = new File([filebuffer], \"file\");\r\n        const json = await web3s.put([file], {\r\n          wrapWithDirectory: false,\r\n          onStoredChunk: (size) => {\r\n            //aggiorno lo stato del caricamento\r\n            caricato = Math.floor(caricato + size);\r\n\r\n            if (caricato > file.size)\r\n              setProgressValue({ value: file.size, total: file.size });\r\n            else setProgressValue({ value: caricato, total: file.size });\r\n          },\r\n          controllerFetch,\r\n        });\r\n\r\n        //aggiungo cid  a firebase\r\n        let el = await addDoc(\r\n          collection(\r\n            db,\r\n            \"Utenti\",\r\n            route.params.email.replaceAll(\".\", \"DOT\"),\r\n            \"Photos\"\r\n          ),\r\n          {\r\n            cid:\r\n              /*cid.ipnft*/ json.data == undefined\r\n                ? json\r\n                : json.data /*.value*/.cid,\r\n            data: Date.now(),\r\n            name: selectedResult[i].name,\r\n            type:\r\n              selectedResult[i].name.substring(\r\n                selectedResult[i].name.lastIndexOf(\".\") + 1\r\n              ) == \"rar\" ||\r\n                selectedResult[i].name.substring(\r\n                  selectedResult[i].name.lastIndexOf(\".\") + 1\r\n                ) == \"zip\"\r\n                ? \"application/zip\"\r\n                : selectedResult[i].type,\r\n            size: selectedResult[i].size,\r\n            dir: stackDir,\r\n            notPrivate: !response,\r\n          }\r\n        );\r\n\r\n        idFile = el.id;\r\n\r\n        await aggiornaFoto(el.id)\r\n          .then(() => {\r\n            mutexFoto = false;\r\n            setSpinnerVisibile(false);\r\n            setReload(false);\r\n          })\r\n          .catch((err) => {\r\n            mutexFoto = false;\r\n\r\n            alert(\"Loading file cancelled\");\r\n\r\n            //tolgo overlay caricamneto\r\n            setSpinnerVisibile(false);\r\n\r\n            //annullo tutti i caricamenti in coda\r\n            i = selectedResult.length;\r\n          });\r\n      } catch (err) {\r\n        //cosi annullo tutti i caricamenti in coda\r\n        i = selectedResult.length;\r\n\r\n        errorLoading = true;\r\n\r\n        try {\r\n          //elimino da firebase\r\n          await deleteDoc(\r\n            doc(\r\n              db,\r\n              \"Utenti\",\r\n              route.params.email.replaceAll(\".\", \"DOT\"),\r\n              \"Photos\",\r\n              idFile\r\n            )\r\n          );\r\n        } catch (ert) { }\r\n\r\n        controllerFetch = new AbortController();\r\n\r\n        web3s = new Web3Storage({\r\n          token: config.Web3StorageToken,\r\n          abortController: controllerFetch,\r\n        });\r\n\r\n        console.log(err);\r\n        alert(\"Loading failed\");\r\n        //tolgo overlay caricamneto\r\n        setSpinnerVisibile(false);\r\n        setReload(false);\r\n      }\r\n    }\r\n    if (!errorLoading) alert(\"All files have been uploaded successfully\");\r\n  };\r\n\r\n  let createFolder = async () => {\r\n    let nameFolder = window.prompt(\"Enter the name of the folder\");\r\n\r\n    if (nameFolder != null && nameFolder != \"\") {\r\n      await addDoc(\r\n        collection(\r\n          db,\r\n          \"Utenti\",\r\n          route.params.email.replaceAll(\".\", \"DOT\"),\r\n          \"folders\"\r\n        ),\r\n        {\r\n          name: nameFolder,\r\n          data: Date.now(),\r\n          dir: stackDir,\r\n        }\r\n      );\r\n\r\n      setSpinnerVisibile(true);\r\n      setReload(true);\r\n      await aggiornaFoto().then(() => {\r\n        mutexFoto = false;\r\n        setSpinnerVisibile(false);\r\n        setReload(false);\r\n      });\r\n    }\r\n  };\r\n\r\n  //menu al click della foto\r\n  let menuSelection = async (value) => {\r\n    //copy link per file pubblici\r\n    if (value == 5) {\r\n      copy(\"https://\" + elementoSelezionato.cid + \".ipfs.dweb.link\");\r\n\r\n      alert(\"Link copied to clipboard\");\r\n    }\r\n\r\n    //info file\r\n    if (value == 4) {\r\n      navigation.push(\"FileInfo\", {\r\n        email: route.params.email,\r\n        name: elementoSelezionato.name,\r\n        size: elementoSelezionato.size,\r\n        data: elementoSelezionato.data,\r\n        cid: elementoSelezionato.cid,\r\n      });\r\n    }\r\n\r\n    //Elimina foto\r\n    if (value == 2) {\r\n      //elimino da firebase\r\n      await deleteDoc(\r\n        doc(\r\n          db,\r\n          \"Utenti\",\r\n          route.params.email.replaceAll(\".\", \"DOT\"),\r\n          \"Photos\",\r\n          elementoSelezionato.id\r\n        )\r\n      );\r\n\r\n      //elimino dallo state\r\n      let newImages = Object.assign([], images); //si fa così per creare una copia dell'array nello stato\r\n      newImages.splice(\r\n        newImages.indexOf(\r\n          newImages.filter((obj) => obj.id === elementoSelezionato.id)[0]\r\n        ),\r\n        1\r\n      );\r\n      setImages(newImages);\r\n    }\r\n\r\n    //Download foto\r\n    if (value == 1) {\r\n      if (!elementoSelezionato.notPrivate) {\r\n        let win;\r\n\r\n        if (/^((?!chrome|android).)*safari/i.test(navigator.userAgent))\r\n          win = window;\r\n        else win = window.open();\r\n\r\n        win.window.document.write(\r\n          \"<html>  <head>    <style>      html,      body {        height: 100%;        width: 100%;      }      .container {        align-items: center;        display: flex;        justify-content: center;        height: 100%;        width: 100%;      }    </style>  </head>  <body style='background-color: #191919; overflow: hidden'>    <div class='container'>      <img src='https://i.ibb.co/68tNrK6/ounn.png' style='width: 250px' /> <br/>     <div class='content'>        <p          id='textDownload'          style='color: white; font-family: Arial, Helvetica, sans-serif'        >          Download of \" +\r\n          elementoSelezionato.name +\r\n          \" in progress...        </p>      </div>    </div>  </body></html>\"\r\n        );\r\n\r\n        //se chiudo la finestra eseguo abort del download\r\n        win.window.addEventListener(\"beforeunload\", (ev) => {\r\n          controllerFetchDownload.abort();\r\n          controllerFetchDownload = new AbortController();\r\n        });\r\n\r\n        axios\r\n          .get(\r\n            /* \"https://ipfs.io/ipfs/\" + elementoSelezionato.cid */ \"https://\" +\r\n            elementoSelezionato.cid +\r\n            \".ipfs.dweb.link\",\r\n            {\r\n              signal: controllerFetchDownload.signal,\r\n              responseType: \"arraybuffer\",\r\n              onDownloadProgress: (event) => {\r\n                win.document.getElementById(\"textDownload\").innerHTML =\r\n                  \"Download of \" +\r\n                  elementoSelezionato.name +\r\n                  \" in progress...\" +\r\n                  \" \" +\r\n                  event.loaded +\r\n                  \"/\" +\r\n                  event.total;\r\n              },\r\n            }\r\n          )\r\n          .then(async (arrayBuffer) => {\r\n            let enc = new TextEncoder();\r\n            //allungo la password inserendo k perchè deve essere almeno essere lunga 16 per generare la chiave\r\n            let passwordKey = route.params.password;\r\n            while (passwordKey.length < 16) passwordKey += \"k\";\r\n\r\n            //genero key con la password\r\n            let key = await window.crypto.subtle.importKey(\r\n              \"raw\",\r\n              enc.encode(passwordKey),\r\n              \"AES-GCM\",\r\n              false,\r\n              [\"encrypt\", \"decrypt\"]\r\n            );\r\n\r\n            //decifro il file\r\n            let decifrato = await window.crypto.subtle.decrypt(\r\n              { name: \"AES-GCM\", iv: enc.encode(passwordKey) },\r\n              key,\r\n              arrayBuffer.data\r\n            );\r\n\r\n            //se è un immagine o un video lo faccio visualizzare\r\n            //altrimenti lo scarico dandogli il nome del file giusto\r\n            if (\r\n              elementoSelezionato.type.includes(\"image\") ||\r\n              elementoSelezionato.type.includes(\"video\")\r\n            ) {\r\n              let blob = new Blob([decifrato], {\r\n                type: elementoSelezionato.type,\r\n              });\r\n              let url = URL.createObjectURL(blob);\r\n              win.location.href = url;\r\n            } else {\r\n              //scarico il file\r\n              var a = win.document.createElement(\"a\");\r\n              let blob = new Blob([decifrato], {\r\n                type: elementoSelezionato.type,\r\n              });\r\n              let url = URL.createObjectURL(blob);\r\n              a.setAttribute(\"href\", url);\r\n              a.setAttribute(\"download\", elementoSelezionato.name);\r\n              win.document.body.append(a);\r\n              a.click();\r\n              win.window.URL.revokeObjectURL(url);\r\n              a.remove();\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            //errore durante il download\r\n            if (err.message != \"canceled\") {\r\n              alert(\"Error during downloading \" + elementoSelezionato.name);\r\n              win.document.getElementById(\"textDownload\").innerHTML =\r\n                \"Error during downloading \" + elementoSelezionato.name;\r\n            }\r\n          });\r\n      } else {\r\n        let win;\r\n\r\n        if (/^((?!chrome|android).)*safari/i.test(navigator.userAgent))\r\n          win = window;\r\n        else win = window.open();\r\n\r\n        win.window.document.write(\r\n          \"<html>  <head>    <style>      html,      body {        height: 100%;        width: 100%;      }      .container {        align-items: center;        display: flex;        justify-content: center;        height: 100%;        width: 100%;      }    </style>  </head>  <body style='background-color: #191919; overflow: hidden'>    <div class='container'>      <img src='https://i.ibb.co/68tNrK6/ounn.png' style='width: 250px' />  <br/>    <div class='content'>        <p          id='textDownload'          style='color: white; font-family: Arial, Helvetica, sans-serif'        >          Download of \" +\r\n          elementoSelezionato.name +\r\n          \" in progress...        </p>      </div>    </div>  </body></html>\"\r\n        );\r\n\r\n        //se chiudo la finestra eseguo abort del download\r\n        win.window.addEventListener(\"beforeunload\", (ev) => {\r\n          controllerFetchDownload.abort();\r\n          controllerFetchDownload = new AbortController();\r\n        });\r\n\r\n        axios\r\n          .get(\r\n            /* \"https://ipfs.io/ipfs/\" + elementoSelezionato.cid */ \"https://\" +\r\n            elementoSelezionato.cid +\r\n            \".ipfs.dweb.link\",\r\n            {\r\n              signal: controllerFetchDownload.signal,\r\n              responseType: \"arraybuffer\",\r\n              onDownloadProgress: (event) => {\r\n                win.document.getElementById(\"textDownload\").innerHTML =\r\n                  \"Download of \" +\r\n                  elementoSelezionato.name +\r\n                  \" in progress...\" +\r\n                  \" \" +\r\n                  event.loaded +\r\n                  \"/\" +\r\n                  event.total;\r\n              },\r\n            }\r\n          )\r\n          .then(async (arrayBuffer) => {\r\n            //scarico il file\r\n            var a = win.document.createElement(\"a\");\r\n            let blob = new Blob([arrayBuffer.data], {\r\n              type: elementoSelezionato.type,\r\n            });\r\n            let url = URL.createObjectURL(blob);\r\n            a.setAttribute(\"href\", url);\r\n            a.setAttribute(\"download\", elementoSelezionato.name);\r\n            win.document.body.append(a);\r\n            a.click();\r\n            win.window.URL.revokeObjectURL(url);\r\n            a.remove();\r\n          })\r\n          .catch((err) => {\r\n            //errore durante il download\r\n            if (err.message != \"canceled\") {\r\n              alert(\"Error during downloading \" + elementoSelezionato.name);\r\n              win.document.getElementById(\"textDownload\").innerHTML =\r\n                \"Error during downloading \" + elementoSelezionato.name;\r\n            }\r\n          });\r\n      }\r\n    }\r\n\r\n    //rinomina file\r\n    if (value == 3) {\r\n      let newName = window.prompt(\"Enter new name\");\r\n      if (newName != null && newName.trim() != \"\") {\r\n        //rinomino oggetto in state\r\n        let newImages = Object.assign([], images); //si fa così per creare una copia dell'array nello stato\r\n        let newObject = newImages.filter(\r\n          (obj) => obj.id === elementoSelezionato.id\r\n        )[0];\r\n        let estenzione = newObject.name.slice(newObject.name.lastIndexOf(\".\"));\r\n        newObject.name = newName.trim() + estenzione;\r\n        newImages[\r\n          newImages.indexOf(\r\n            newImages.filter((obj) => obj.id === elementoSelezionato.id)[0]\r\n          )\r\n        ] = newObject;\r\n        setImages(newImages);\r\n\r\n        //rinomino su firebase\r\n        await updateDoc(\r\n          doc(\r\n            db,\r\n            \"Utenti\",\r\n            route.params.email.replaceAll(\".\", \"DOT\"),\r\n            \"Photos\",\r\n            elementoSelezionato.id\r\n          ),\r\n          { name: newName.trim() + estenzione }\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  //menu al click della cartella\r\n  let menuSelectionFolder = async (value) => {\r\n    //Elimina folder\r\n    if (value == 2) {\r\n      //controllo se la cartella contiene cartelle\r\n      let controllo1 = await getDocs(\r\n        query(\r\n          collection(\r\n            db,\r\n            \"Utenti\",\r\n            route.params.email.replaceAll(\".\", \"DOT\"),\r\n            \"folders\"\r\n          ),\r\n          where(\"dir\", \"array-contains\", elementoSelezionato.id)\r\n        )\r\n      );\r\n\r\n      //controllo se la cartella contiene file\r\n      let controllo2 = await getDocs(\r\n        query(\r\n          collection(\r\n            db,\r\n            \"Utenti\",\r\n            route.params.email.replaceAll(\".\", \"DOT\"),\r\n            \"Photos\"\r\n          ),\r\n          where(\"dir\", \"array-contains\", elementoSelezionato.id)\r\n        )\r\n      );\r\n\r\n      //elimino se la cartella è vuota\r\n      if (controllo1.size == 0 && controllo2.size == 0) {\r\n        //elimino da firebase\r\n        await deleteDoc(\r\n          doc(\r\n            db,\r\n            \"Utenti\",\r\n            route.params.email.replaceAll(\".\", \"DOT\"),\r\n            \"folders\",\r\n            elementoSelezionato.id\r\n          )\r\n        );\r\n\r\n        //elimino dallo state\r\n        let newFolders = Object.assign([], folders); //si fa così per creare una copia dell'array nello stato\r\n        newFolders.splice(\r\n          newFolders.indexOf(\r\n            newFolders.filter((obj) => obj.id === elementoSelezionato.id)[0]\r\n          ),\r\n          1\r\n        );\r\n        setFolders(newFolders);\r\n      } else {\r\n        alert(\"The folder must be empty\");\r\n      }\r\n    }\r\n\r\n    //apro cartella\r\n    if (value == 3) {\r\n      setStackDir((oldStack) => [...oldStack, elementoSelezionato.id]);\r\n\r\n      setImages([]);\r\n    }\r\n\r\n    //rinomino cartella\r\n    if (value == 1) {\r\n      let newName = window.prompt(\"Enter new name\");\r\n      if (newName != null && newName.trim() != \"\") {\r\n        //rinomino oggetto in state\r\n        let newFolders = Object.assign([], folders); //si fa così per creare una copia dell'array nello stato\r\n        let newObject = newFolders.filter(\r\n          (obj) => obj.id === elementoSelezionato.id\r\n        )[0];\r\n        newObject.name = newName.trim();\r\n        newFolders[\r\n          newFolders.indexOf(\r\n            newFolders.filter((obj) => obj.id === elementoSelezionato.id)[0]\r\n          )\r\n        ] = newObject;\r\n        setFolders(newFolders);\r\n\r\n        //rinomino su firebase\r\n        await updateDoc(\r\n          doc(\r\n            db,\r\n            \"Utenti\",\r\n            route.params.email.replaceAll(\".\", \"DOT\"),\r\n            \"folders\",\r\n            elementoSelezionato.id\r\n          ),\r\n          { name: newName.trim() }\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  ///////////////RENDER IMMAGINI/////////////////////////////////////\r\n  const Item = ({ data, cid, id, name, size, type, notPrivate }) => {\r\n    return (\r\n      //Menu  compare alla pressione dell'immagine\r\n      <TouchableOpacity\r\n        onPress={() => {\r\n          setElementoSelezionato({\r\n            id: id,\r\n            cid: cid,\r\n            type: type,\r\n            name: name,\r\n            size: size,\r\n            data: data,\r\n            notPrivate: notPrivate,\r\n            modalita: \"diretta\",\r\n          });\r\n        }}\r\n      >\r\n        <View\r\n          style={{\r\n            padding: winSize.width < 900 ? hp(\"2%\") : hp(\"3%\"),\r\n          }}\r\n        >\r\n          <View style={{ flexDirection: \"row\", alignItems: \"center\" }}>\r\n            {/*Immagine */}\r\n            <Image\r\n              source={\r\n                notPrivate\r\n                  ? require(\"./assets/filePublic.png\")\r\n                  : require(\"./assets/file.png\")\r\n              }\r\n              cacheKey={cid}\r\n              style={{\r\n                width: \"90px\",\r\n                aspectRatio: 0.7,\r\n                height: \"110px\",\r\n                borderRadius: hp(\"5%\"),\r\n                alignSelf: \"stretch\",\r\n              }}\r\n            />\r\n\r\n            {/*nome file */}\r\n            <Text\r\n              style={{\r\n                color: \"white\",\r\n                width: \"25%\",\r\n                fontWeight: \"bold\",\r\n                marginLeft: \"3%\",\r\n              }}\r\n            >\r\n              {name}\r\n            </Text>\r\n\r\n            {/*size  + data*/}\r\n            <Text\r\n              style={{\r\n                color: \"white\",\r\n                width: \"25%\",\r\n                fontWeight: 200,\r\n                marginLeft: \"10%\",\r\n              }}\r\n            >\r\n              {\"Size : \" +\r\n                (size / 1000000).toFixed(2) +\r\n                \"MB Loading date: \" +\r\n                new Date(data).toLocaleString()}\r\n            </Text>\r\n\r\n            {/*Icona per aprire impostazioni file */}\r\n            <View style={{ flex: 1, alignItems: \"flex-end\" }}>\r\n              <TouchableOpacity\r\n                onPress={() => {\r\n                  setElementoSelezionato({\r\n                    id: id,\r\n                    cid: cid,\r\n                    type: type,\r\n                    name: name,\r\n                    size: size,\r\n                    data: data,\r\n                    notPrivate: notPrivate,\r\n                  });\r\n                  setValueModal(1);\r\n                }}\r\n              >\r\n                <Icon name=\"dots-vertical\" color={\"white\"} size={30} />\r\n              </TouchableOpacity>\r\n            </View>\r\n          </View>\r\n        </View>\r\n      </TouchableOpacity>\r\n    );\r\n  };\r\n\r\n  const renderItem = ({ item }) => (\r\n    <Item\r\n      data={item.data}\r\n      cid={item.cid}\r\n      id={item.id}\r\n      name={item.name}\r\n      size={item.size}\r\n      type={item.type}\r\n      notPrivate={item.notPrivate}\r\n    />\r\n  );\r\n\r\n  //////////////////////////////////////////////////////////////////\r\n\r\n  ///////////////RENDER Cartelle/////////////////////////////////////\r\n  const Itemfolder = ({ id, data, name }) => {\r\n    return (\r\n      //Menu  compare alla pressione dell'immagine\r\n      <TouchableOpacity\r\n        onPress={() => {\r\n          setElementoSelezionato({\r\n            id: id,\r\n            modalita: \"diretta\",\r\n          });\r\n        }}\r\n        style={{\r\n          padding: winSize.width < 900 ? hp(\"2%\") : hp(\"3%\"),\r\n        }}\r\n      >\r\n        <View>\r\n          <View style={{ flexDirection: \"row\", alignItems: \"center\" }}>\r\n            {/*Immagine */}\r\n            <Image\r\n              source={require(\"./assets/folder.png\")}\r\n              cacheKey={name}\r\n              style={{\r\n                width: \"90px\",\r\n                aspectRatio: 0.7,\r\n                height: \"110px\",\r\n                borderRadius: hp(\"5%\"),\r\n                alignSelf: \"stretch\",\r\n              }}\r\n            />\r\n            <Text\r\n              style={{\r\n                color: \"white\",\r\n                width: \"25%\",\r\n                fontWeight: \"bold\",\r\n                marginLeft: \"3%\",\r\n              }}\r\n            >\r\n              {name}\r\n            </Text>\r\n            <Text\r\n              style={{\r\n                color: \"white\",\r\n                width: \"25%\",\r\n                fontWeight: 200,\r\n                marginLeft: \"10%\",\r\n              }}\r\n            >\r\n              {\"Creation date: \" + new Date(data).toLocaleString()}\r\n            </Text>\r\n\r\n            {/*Icona per aprire impostazioni file */}\r\n            <View style={{ flex: 1, alignItems: \"flex-end\" }}>\r\n              <TouchableOpacity\r\n                onPress={() => {\r\n                  setElementoSelezionato({\r\n                    name: name,\r\n                    id: id,\r\n                  });\r\n                  setValueModal(2);\r\n                }}\r\n              >\r\n                <Icon name=\"dots-vertical\" color={\"white\"} size={30} />\r\n              </TouchableOpacity>\r\n            </View>\r\n          </View>\r\n        </View>\r\n      </TouchableOpacity>\r\n    );\r\n  };\r\n\r\n  const renderItemFolder = ({ item }) => (\r\n    <Itemfolder id={item.id} data={item.data} name={item.name} />\r\n  );\r\n\r\n  //////////////////////////////////////////////////////////////////\r\n\r\n  return (\r\n    <View\r\n      style={{\r\n        width: \"flex\",\r\n        height: \"100%\",\r\n        alignItems: \"center\",\r\n      }}\r\n    >\r\n     \r\n <LinearGradient\r\n        // Background Linear Gradient\r\n        colors={['#290026','#254a3e', '#52816f']}\r\n        style={{\r\n          position: 'absolute',\r\n          left: 0,\r\n          right: 0,\r\n          top: 0,\r\n          height: \"100vh\",\r\n        }}\r\n        start={{ x: 0, y: 1 }}\r\n        end={{ x: 1, y: 1 }}\r\n      />\r\n\r\n       {/*Logo */}\r\n       <Image\r\n        resizeMode=\"center\"\r\n        style={{\r\n          position: \"absolute\",\r\n          top: hp(\"5%\"),\r\n          left:50,\r\n          width: winSize.width / 4,\r\n          height: \"50px\",\r\n          marginTop: \"10px\",\r\n          marginBottom: \"50px\",\r\n        }}\r\n        source={{ uri: require(\"./assets/ounn.png\") }}\r\n      ></Image>\r\n      {/*Modal opzioni file */}\r\n      <Modal visible={valueModal == 1 ? true : false} transparent={true}>\r\n        <View\r\n          style={{\r\n            backgroundColor: \"rgba(0, 0, 0, 0.5)\",\r\n            flex: 1,\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            height: \"100%\",\r\n          }}\r\n        >\r\n          <View\r\n            style={{\r\n              backgroundColor: \"#2b2b2b\",\r\n              borderRadius: \"5%\",\r\n              width: winSize.width > 900 ? \"50%\" : \"80%\",\r\n              height: winSize.width > 900 ? \"70%\" : \"70%\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n            }}\r\n          >\r\n            {/*Nome file */}\r\n            <Text\r\n              style={{\r\n                textAlign: \"center\",\r\n                color: \"white\",\r\n                fontWeight: \"100\",\r\n                fontSize: \"30px\",\r\n                width: \"80%\",\r\n              }}\r\n            >\r\n              {elementoSelezionato.name}\r\n            </Text>\r\n\r\n            {/*Tasto download */}\r\n            <TouchableOpacity\r\n              onPress={() => {\r\n                menuSelection(1);\r\n                setValueModal(0);\r\n              }}\r\n              style={{ marginTop: winSize.width > 900 ? \"3%\" : \"7%\" }}\r\n            >\r\n              <Text style={{ color: \"white\", fontSize: \"25px\" }}>Download</Text>\r\n            </TouchableOpacity>\r\n\r\n            {elementoSelezionato.notPrivate != undefined &&\r\n              elementoSelezionato.notPrivate == true ? (\r\n              //tasto copy link\r\n              <TouchableOpacity\r\n                onPress={() => {\r\n                  menuSelection(5);\r\n                  setValueModal(0);\r\n                }}\r\n                style={{ marginTop: winSize.width > 900 ? \"3%\" : \"7%\" }}\r\n              >\r\n                <Text style={{ color: \"white\", fontSize: \"25px\" }}>\r\n                  Copy link\r\n                </Text>\r\n              </TouchableOpacity>\r\n            ) : null}\r\n\r\n            {/*Tasto rename */}\r\n            <TouchableOpacity\r\n              style={{ marginTop: winSize.width > 900 ? \"3%\" : \"7%\" }}\r\n              onPress={() => {\r\n                menuSelection(3);\r\n                setValueModal(0);\r\n              }}\r\n            >\r\n              <Text style={{ color: \"white\", fontSize: \"25px\" }}>Rename</Text>\r\n            </TouchableOpacity>\r\n\r\n            {/*Tasto Info */}\r\n            <TouchableOpacity\r\n              style={{ marginTop: winSize.width > 900 ? \"3%\" : \"7%\" }}\r\n              onPress={() => {\r\n                menuSelection(4);\r\n                setValueModal(0);\r\n              }}\r\n            >\r\n              <Text style={{ color: \"white\", fontSize: \"25px\" }}>Info</Text>\r\n            </TouchableOpacity>\r\n\r\n            {/*Tasto delete */}\r\n            <TouchableOpacity\r\n              style={{ marginTop: winSize.width > 900 ? \"3%\" : \"7%\" }}\r\n              onPress={() => {\r\n                menuSelection(2);\r\n                setValueModal(0);\r\n              }}\r\n            >\r\n              <Text style={{ color: \"red\", fontSize: \"25px\" }}>Delete</Text>\r\n            </TouchableOpacity>\r\n\r\n            {/*Tasto chiudere modal */}\r\n            <TouchableOpacity\r\n              style={{ marginTop: winSize.width > 900 ? \"3%\" : \"7%\" }}\r\n              onPress={() => {\r\n                setValueModal(0);\r\n              }}\r\n            >\r\n              <Icon name=\"close\" color={\"#ff5c5c\"} size={30} />\r\n            </TouchableOpacity>\r\n          </View>\r\n        </View>\r\n      </Modal>\r\n\r\n      {/*Modal opzioni folders */}\r\n      <Modal visible={valueModal == 2 ? true : false} transparent={true}>\r\n        <View\r\n          style={{\r\n            backgroundColor: \"rgba(0, 0, 0, 0.5)\",\r\n            flex: 1,\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            height: \"100%\",\r\n          }}\r\n        >\r\n          <View\r\n            style={{\r\n              backgroundColor: \"#2b2b2b\",\r\n              borderRadius: \"5%\",\r\n              width: winSize.width > 900 ? \"50%\" : \"80%\",\r\n              height: winSize.width > 900 ? \"50%\" : \"60%\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n            }}\r\n          >\r\n            {/*Nome file */}\r\n            <Text\r\n              style={{\r\n                textAlign: \"center\",\r\n                color: \"white\",\r\n                fontWeight: \"100\",\r\n                fontSize: \"30px\",\r\n                width: \"80%\",\r\n              }}\r\n            >\r\n              {elementoSelezionato.name}\r\n            </Text>\r\n\r\n            {/*Tasto Open */}\r\n            <TouchableOpacity\r\n              onPress={() => {\r\n                menuSelectionFolder(3);\r\n                setValueModal(0);\r\n              }}\r\n              style={{ marginTop: winSize.width > 900 ? \"3%\" : \"7%\" }}\r\n            >\r\n              <Text style={{ color: \"white\", fontSize: \"25px\" }}>Open</Text>\r\n            </TouchableOpacity>\r\n\r\n            {/*Tasto rename */}\r\n            <TouchableOpacity\r\n              style={{ marginTop: winSize.width > 900 ? \"3%\" : \"7%\" }}\r\n              onPress={() => {\r\n                menuSelectionFolder(1);\r\n                setValueModal(0);\r\n              }}\r\n            >\r\n              <Text style={{ color: \"white\", fontSize: \"25px\" }}>Rename</Text>\r\n            </TouchableOpacity>\r\n\r\n            {/*Tasto delete */}\r\n            <TouchableOpacity\r\n              style={{ marginTop: winSize.width > 900 ? \"3%\" : \"7%\" }}\r\n              onPress={() => {\r\n                menuSelectionFolder(2);\r\n                setValueModal(0);\r\n              }}\r\n            >\r\n              <Text style={{ color: \"red\", fontSize: \"25px\" }}>Delete</Text>\r\n            </TouchableOpacity>\r\n\r\n            {/*Tasto chiudere modal */}\r\n            <TouchableOpacity\r\n              style={{ marginTop: winSize.width > 900 ? \"3%\" : \"7%\" }}\r\n              onPress={() => {\r\n                setValueModal(0);\r\n              }}\r\n            >\r\n              <Icon name=\"close\" color={\"#ff5c5c\"} size={30} />\r\n            </TouchableOpacity>\r\n          </View>\r\n        </View>\r\n      </Modal>\r\n\r\n      {/*Floating menu with the cursor being a pointer*/}\r\n      <TouchableOpacity\r\n        style={{\r\n          position: \"absolute\",\r\n          right: \"5%\",\r\n          top: \"-2%\",\r\n          zIndex: 100,\r\n          backgroundColor: \"transparent\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n        }}\r\n        onPress={() => {\r\n          setMenuOpen(!menuOpen);\r\n        }\r\n        }\r\n      >\r\n      <FloatingMenu\r\n        position=\"top-right\"\r\n        /*iconColor={\"#ff5c5c\"}\r\n        borderColor={\"#ff5c5c\"}\r\n        backgroundDownColor={\"#ff5c5c\"}*/\r\n        isOpen={menuOpen}\r\n        style={{\r\n          cursor: \"pointer\",\r\n        }}\r\n        items={[\r\n          { label: \"Info\" },\r\n          { label: \"Reload\" },\r\n          { label: \"Create new folder\" },\r\n          { label: \"Upload\" },\r\n          { label: \"Logout\" },\r\n        ]}\r\n        onMenuToggle={() => {\r\n          setMenuOpen(!menuOpen);\r\n        }}\r\n        onItemPress={(item, index) => {\r\n          if (index == 0) {\r\n            //logout\r\n            async () => {\r\n              await AsyncStorage.clear();\r\n              signOut(auth);\r\n              navigation.push(\"LogIn\");\r\n            }\r\n          }\r\n           if (index == 1) {\r\n            document.getElementById(\"fileLoad\").click();\r\n            setMenuOpen(false);\r\n          }\r\n          if (index == 2) {\r\n            createFolder();\r\n            setMenuOpen(false);\r\n          }\r\n          if (index == 3) {\r\n            setImages([]);\r\n            setMenuOpen(false);\r\n          }\r\n          if (index == 4) {\r\n            navigation.push(\"Settings\", {\r\n              email: route.params.email,\r\n              password: route.params.password,\r\n            });\r\n          }\r\n        }}\r\n        renderItemIcon={(item, index) => {\r\n          if (index == 0) {\r\n            return (\r\n              <Icon\r\n              name=\"exit-to-app\" \r\n              onPress={async () => {\r\n                await AsyncStorage.clear();\r\n                signOut(auth);\r\n                navigation.push(\"LogIn\");\r\n              }}\r\n              size={30} />\r\n            );\r\n          }\r\n          if (index == 1)\r\n            return (\r\n              <Icon\r\n              name=\"file-document-outline\" \r\n              onPress={() => {document.getElementById(\"fileLoad\").click()\r\n              setMenuOpen(false);}}\r\n              size={30} />\r\n            );\r\n          if (index == 2)\r\n            return (\r\n              <Icon\r\n              name=\"folder-plus-outline\"\r\n              onPress= {() =>\r\n                {createFolder();\r\n                setMenuOpen(false);}}\r\n              size={30} />\r\n            );\r\n          if (index == 3)\r\n            return <Icon\r\n            name=\"reload\"\r\n            onPress={() => {\r\n              setImages([]);\r\n              setMenuOpen(false);\r\n            }\r\n            }\r\n            size={30} />;\r\n          if (index == 4)\r\n            return (\r\n              <Icon name=\"information-outline\"\r\n              onPress={() => {\r\n                navigation.push(\"Settings\", {\r\n                  email: route.params.email,\r\n                  password: route.params.password,\r\n                });\r\n                setMenuOpen(false);\r\n              }}\r\n              size={30} />\r\n            );\r\n        }}\r\n        \r\n      />\r\n      </TouchableOpacity>\r\n      {/*overlay loading */}\r\n      <Spinner\r\n        visible={spinnerVisible}\r\n        textStyle={{ color: \"white\" }}\r\n        children={\r\n          <View\r\n            style={{\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n            }}\r\n          >\r\n            {/*Spinner */}\r\n            {reload ? (\r\n              <ActivityIndicator\r\n                color={\"white\"}\r\n                size={\"large\"}\r\n              ></ActivityIndicator>\r\n            ) : (\r\n              <View\r\n                style={{\r\n                  height: \"40%\",\r\n                  borderRadius: hp(\"5%\"),\r\n                  backgroundColor: \"#2b2b2b\",\r\n                  width: winSize.width < 900 ? \"70%\" : \"30%\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                }}\r\n              >\r\n                {/*Testo numero file in caricamento */}\r\n                <Text\r\n                  style={{\r\n                    fontWeight: 200,\r\n                    color: \"white\",\r\n                    fontWeight: \"bold\",\r\n                    marginBottom: \"8%\",\r\n                  }}\r\n                >\r\n                  {\"Loading file \" + numFile.current + \" of \" + numFile.total}\r\n                </Text>\r\n\r\n                {/*Testo progress bar */}\r\n                <Text style={{ fontWeight: 200, color: \"white\" }}>\r\n                  {Math.floor(\r\n                    (progressValue.value / progressValue.total) * 100\r\n                  ) +\r\n                    \" / \" +\r\n                    100}\r\n                </Text>\r\n\r\n                {/*Progress bar */}\r\n                <Progress.Bar\r\n                  style={{ backgroundColor: \"white\" }}\r\n                  progress={progressValue.value / progressValue.total}\r\n                  width={200}\r\n                  color=\"black\"\r\n                />\r\n\r\n                {/*Tasto annulla caricamento lo mostro solo se è un caricamento di aggiunta foto*/}\r\n                <TouchableOpacity\r\n                  style={{\r\n                    backgroundColor: \"#ff5c5c\",\r\n                    width: \"150px\",\r\n                    height: \"50px\",\r\n                    marginTop: hp(\"5%\"),\r\n                    justifyContent: \"center\",\r\n                    alignItems: \"center\",\r\n                  }}\r\n                  onPress={() => {\r\n                    controllerFetch.abort();\r\n                  }}\r\n                >\r\n                  <View>\r\n                    <Text style={{ color: \"white\" }}>Cancelled</Text>\r\n                  </View>\r\n                </TouchableOpacity>\r\n              </View>\r\n            )}\r\n          </View>\r\n        }\r\n      />\r\n\r\n     \r\n\r\n      {/*Nome e cognome utente */}\r\n\r\n\r\n      {/*Pulsante aggiunta foto */}\r\n      <input\r\n        onChange={async (event) => {\r\n          await openImagePickerAsync(event.target.files);\r\n          event.target.value = \"\";\r\n        }}\r\n        id=\"fileLoad\"\r\n        type=\"file\"\r\n        accept=\"*\"\r\n        style={{ display: \"none\" }}\r\n        multiple={true}\r\n      />\r\n      <label for=\"fileLoad\"></label>\r\n\r\n      <View\r\n        style={{\r\n          width: \"100%\",\r\n          justifyContent: \"center\",\r\n          flexDirection: \"row\",\r\n          height: \"5%\",\r\n          marginTop: hp(\"15%\"),\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n      \r\n\r\n        {/*Pulsante back */}\r\n        {stackDir[stackDir.length - 1] != \"Photos\" ? (\r\n          <TouchableOpacity\r\n            style={{\r\n              justifyContent: \"center\",\r\n              alignItems: \"center\",\r\n              marginLeft: \"50px\",\r\n            }}\r\n            onPress={() => {\r\n              if (stackDir.length != 1) {\r\n                //ritorno alla dir precedente\r\n                let newStack = Object.assign([], stackDir); //si fa così per creare una copia dell'array nello stato\r\n                newStack.pop();\r\n                setStackDir(newStack);\r\n\r\n                //attiverà useEffect\r\n                setImages([]);\r\n              }\r\n            }}\r\n          >\r\n            <Icon name=\"keyboard-backspace\" color={\"white\"} size={30} />\r\n            <Text style={{ color: \"white\", fontWeight: 200 }}>Back</Text>\r\n          </TouchableOpacity>\r\n        ) : null}\r\n      </View>\r\n      <View style={{\r\n        borderRadius: \"50px\",\r\n        backgroundColor: \"#210623\",\r\n        width: winSize.width / 2,\r\n        height: winSize.width / 3.5,\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        marginTop: winSize.height / 15,\r\n      }}>\r\n        <View style={{\r\n          width: \"50%\",\r\n          height: \"80%\",\r\n          borderRadius: \"15px\",\r\n          borderWidth: \"12px\",\r\n          borderColor: \"#55e292\",\r\n          margin: \"25px\",\r\n          alignSelf: \"center\",\r\n          marginLeft: \"1vw\",\r\n        }}>\r\n          \r\n          <TouchableOpacity\r\n          \r\n            style={{\r\n              width:\"100%\",\r\n              height:\"100%\",\r\n              justifyContent: \"center\",\r\n              alignItems: \"center\",\r\n             }}\r\n            onPress={() => {\r\n              document.getElementById(\"fileLoad\").click();\r\n              setMenuOpen(false);\r\n            }}\r\n          >\r\n              <Image\r\n            style={{\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n           \r\n            }}\r\n            source={require(\"./assets/upload_button.png\")}\r\n            />\r\n          </TouchableOpacity>\r\n\r\n\r\n        \r\n        </View>\r\n        {/*make a view with two rows, a text on top of a scrollview*/}\r\n        <View style={{\r\n          width: \"50%\",\r\n          height: \"80%\",\r\n          marginLeft: \"1.7vw\",\r\n        }}>\r\n    \r\n        <Text\r\n        style={{\r\n          color: \"white\",\r\n          fontSize:\r\n            winSize.width < 900 ? winSize.width / 70 : winSize.width / 70,\r\n          fontWeight: \"400\",\r\n          textAlign: \"left\",\r\n        }}\r\n      >\r\n        {\"Recent files\"}\r\n      </Text>\r\n        <ScrollView\r\n          style={{\r\n            width: \"20vw\",\r\n            height: \"80%\",\r\n            backgroundColor: \"#413342\",\r\n            borderRadius: \"50px\",\r\n            marginTop: \"5%\",\r\n          }}\r\n          showsVerticalScrollIndicator={false}\r\n        >\r\n          {folders.length == 0 && images.length == 0 ? (\r\n            <View\r\n              style={{\r\n                width: \"100%\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"center\",\r\n              }}\r\n            >\r\n              {/*Icona empty folder */}\r\n              <Icon name=\"folder-plus-outline\" color={\"#757575\"} size={50} />\r\n              <Text style={{ color: \"#757575\", fontWeight: 200 }}>\r\n                Empty folder\r\n              </Text>\r\n            </View>\r\n          ) : (\r\n            <View>\r\n              <View style={{ width: \"100%\" }}>\r\n                {/*Container folders */}\r\n                <FlatList\r\n                  numColumns={1}\r\n                  data={folders}\r\n                  renderItem={renderItemFolder}\r\n                  keyExtractor={(itemFolders) => itemFolders.id}\r\n                />\r\n              </View>\r\n              <View style={{ width: \"100%\" }}>\r\n                {/*Container photo */}\r\n                <FlatList\r\n                  numColumns={1}\r\n                  data={images}\r\n                  renderItem={renderItem}\r\n                  keyExtractor={(item) => item.id}\r\n                />\r\n              </View>\r\n            </View>\r\n          )}\r\n        </ScrollView>\r\n        </View>\r\n      </View>\r\n\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import { StatusBar } from \"expo-status-bar\";\r\nimport * as React from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  Image,\r\n  TouchableOpacity,\r\n  useWindowDimensions,\r\n  TextInput,\r\n} from \"react-native\";\r\nimport { NavigationContainer } from \"@react-navigation/native\";\r\nimport { createNativeStackNavigator } from \"@react-navigation/native-stack\";\r\nimport {\r\n  widthPercentageToDP as wp,\r\n  heightPercentageToDP as hp,\r\n} from \"react-native-responsive-screen\";\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getAuth, signInWithEmailAndPassword } from \"firebase/auth\";\r\n\r\nimport Icon from \"react-native-vector-icons/MaterialCommunityIcons\";\r\nimport config from \"./config\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { LinearGradient } from 'expo-linear-gradient';\r\n\r\n\r\n\r\nconst LogIn = ({ navigation }) => {\r\n  //per dimensioni finestra in real time\r\n  const winSize = useWindowDimensions();\r\n\r\n  //inizializzo firebase\r\n  //il provider recaptcha serve per rifiutare richieste che provengono da siti al di fuori di ounn\r\n  const app = initializeApp(config.firebaseConfig);\r\n\r\n  const auth = getAuth(app);\r\n\r\n  let [email, setEmail] = React.useState(\"\");\r\n  let [password, setPassword] = React.useState(\"\");\r\n\r\n  let accedi = async () => {\r\n    signInWithEmailAndPassword(auth, email, password)\r\n      .then(async (userCredential) => {\r\n        //salvo per login automatico\r\n        await AsyncStorage.setItem(\r\n          \"credentials\",\r\n          JSON.stringify({\r\n            email: email,\r\n            password: password,\r\n          })\r\n        );\r\n\r\n        navigation.push(\"Home\", { email: email, password: password });\r\n      })\r\n      .catch((error) => {\r\n        alert(\"User credentials not valid\");\r\n      });\r\n  };\r\n\r\n  React.useEffect(async () => {\r\n    //se gia aveva eseguito l'accesso allora vado direttamente all'home\r\n    let credentials = await AsyncStorage.getItem(\"credentials\");\r\n    let credentialsJson = await JSON.parse(credentials);\r\n\r\n    if (credentialsJson != undefined)\r\n      signInWithEmailAndPassword(\r\n        auth,\r\n        credentialsJson.email,\r\n        credentialsJson.password\r\n      )\r\n        .then(async (userCredential) => {\r\n          navigation.push(\"Home\", {\r\n            email: credentialsJson.email,\r\n            password: credentialsJson.password,\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          alert(\"User credentials not valid\");\r\n        });\r\n  }, []);\r\n\r\n  return (\r\n    <View\r\n      style={{\r\n        width: \"flex\",\r\n        height: \"100%\",\r\n        backgroundColor: \"#191919\",\r\n        alignItems: \"center\",\r\n      }}\r\n    >\r\n       <LinearGradient\r\n        // Background Linear Gradient\r\n        colors={['#290026','#254a3e', '#52816f']}\r\n        style={{\r\n          position: 'absolute',\r\n          left: 0,\r\n          right: 0,\r\n          top: 0,\r\n          height: \"100vh\",\r\n        }}\r\n        start={{ x: 0, y: 1 }}\r\n        end={{ x: 1, y: 1 }}\r\n      />\r\n  {/*Logo */}\r\n  <Image\r\n        resizeMode=\"center\"\r\n        style={{\r\n          position: \"absolute\",\r\n          top: hp(\"5%\"),\r\n          left:50,\r\n          width: winSize.width / 4,\r\n          height: \"50px\",\r\n          marginTop: \"10px\",\r\n          marginBottom: \"50px\",\r\n        }}\r\n        source={{ uri: require(\"./assets/ounn.png\") }}\r\n      ></Image>\r\n\r\n        {/*Logo */}\r\n  <Image\r\n        resizeMode=\"center\"\r\n        style={{\r\n          position: \"absolute\",\r\n          top: hp(\"5%\"),\r\n          right:0,\r\n          width: winSize.width / 4,\r\n          height: \"50px\",\r\n          marginTop: \"10px\",\r\n          marginBottom: \"50px\",\r\n        }}\r\n        source={{ uri: require(\"./assets/logo.png\") }}\r\n      ></Image>\r\n      <View\r\n        style={{\r\n          marginTop: hp(\"22%\"),\r\n          borderRadius: \"20px\",\r\n          borderWidth: \"12px\",\r\n          borderColor: \"#55e292\",\r\n          width: winSize.width < 900 ? winSize.width - 100 : winSize.width / 3,\r\n          backgroundColor: \"transparent\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        {/*Login Text */}\r\n        <Text\r\n          style={{\r\n            color: \"white\",\r\n            fontSize: hp(\"5%\"),\r\n            fontWeight: \"400\",\r\n            marginTop: hp(\"5%\"),\r\n          }}\r\n        >\r\n          Login\r\n        </Text>\r\n\r\n        {/*Input EMail */}\r\n        <TextInput\r\n          style={{\r\n            marginTop: hp(\"3%\"),\r\n            height: hp(\"5%\"),\r\n            width: winSize.width < 900 ? winSize.width / 2 : winSize.width / 4,\r\n            borderColor: \"black\",\r\n            borderWidth: \"1px\",\r\n            borderRadius: hp(\"5%\"),\r\n            textAlign: \"center\",\r\n            backgroundColor: \"#cceeed\",\r\n          }}\r\n          onChangeText={(text) => {\r\n            setEmail(text);\r\n          }}\r\n          textContentType=\"emailAddress\"\r\n          placeholder=\"Email\"\r\n        ></TextInput>\r\n\r\n        {/*Input Password */}\r\n        <TextInput\r\n          style={{\r\n            marginTop: hp(\"3%\"),\r\n            height: hp(\"5%\"),\r\n            width: winSize.width < 900 ? winSize.width / 2 : winSize.width / 4,\r\n            borderColor: \"black\",\r\n            borderWidth: \"1px\",\r\n            borderRadius: hp(\"5%\"),\r\n            textAlign: \"center\",\r\n            backgroundColor: \"#cceeed\",\r\n          }}\r\n          onChangeText={(text) => {\r\n            setPassword(text);\r\n          }}\r\n          secureTextEntry=\"true\"\r\n          passwordRules=\"true\"\r\n          placeholder=\"Password\"\r\n        ></TextInput>\r\n\r\n        {/*Pulsante LogIn */}\r\n        <TouchableOpacity\r\n          style={{\r\n            marginTop: hp(\"3%\"),\r\n            backgroundColor: \"#ff5c5c\",\r\n            width: \"150px\",\r\n            height: \"40px\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n          }}\r\n          onPress={() => {\r\n            accedi();\r\n          }}\r\n        >\r\n          <View>\r\n            <Text style={{ color: \"white\" }}>Send</Text>\r\n          </View>\r\n        </TouchableOpacity>\r\n\r\n        {/*SigIn pulsante */}\r\n        <TouchableOpacity\r\n          style={{ marginTop: hp(\"2%\") }}\r\n          onPress={() => {\r\n            navigation.push(\"SigIn\", { auth: auth });\r\n          }}\r\n        >\r\n          <Text style={{ fontSize: hp(\"2%\"), fontWeight: 200, color: \"white\" }}>\r\n            SignUp now\r\n          </Text>\r\n        </TouchableOpacity>\r\n\r\n        {/*Pulsante info */}\r\n        <TouchableOpacity\r\n          style={{\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            marginTop: \"3%\",\r\n            marginBottom: hp(\"5%\"),\r\n          }}\r\n          onPress={() => {\r\n            navigation.push(\"Settings\", { email: \"\" });\r\n          }}\r\n        >\r\n          <Icon name=\"information-outline\" color={\"white\"} size={20} />\r\n        </TouchableOpacity>\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default LogIn;\r\n","import { StatusBar } from \"expo-status-bar\";\r\nimport * as React from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  Image,\r\n  TouchableOpacity,\r\n  useWindowDimensions,\r\n  TextInput,\r\n} from \"react-native\";\r\nimport { NavigationContainer } from \"@react-navigation/native\";\r\nimport { createNativeStackNavigator } from \"@react-navigation/native-stack\";\r\nimport {\r\n  widthPercentageToDP as wp,\r\n  heightPercentageToDP as hp,\r\n} from \"react-native-responsive-screen\";\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { createUserWithEmailAndPassword, getAuth } from \"firebase/auth\";\r\nimport {\r\n  addDoc,\r\n  doc,\r\n  collection,\r\n  getFirestore,\r\n  getDocs,\r\n  query,\r\n  deleteDoc,\r\n  orderBy,\r\n  startAfter,\r\n  limit,\r\n  startAt,\r\n  endBefore,\r\n  updateDoc,\r\n  setDoc,\r\n  getDoc,\r\n  where,\r\n} from \"firebase/firestore/\";\r\n\r\nimport { LinearGradient } from 'expo-linear-gradient';\r\n\r\nconst SigIn = ({ route, navigation }) => {\r\n  //per dimensioni finestra in real time\r\n  const winSize = useWindowDimensions();\r\n\r\n  //prendo auth firebase inizializzato in login\r\n  const auth = route.params.auth;\r\n\r\n  //inizializzo databsee firebase\r\n  const db = getFirestore();\r\n\r\n  let [nome, setNome] = React.useState(\"\");\r\n  let [cognome, setCognome] = React.useState(\"\");\r\n  let [email, setEmail] = React.useState(\"\");\r\n  let [password, setPassword] = React.useState(\"\");\r\n\r\n  let registrati = () => {\r\n    if (nome != \"\" && cognome != \"\" && email != \"\" && password != \"\") {\r\n      if (password.length >= 6) {\r\n        //creo nyovo utente se tutti campi compilati e email non esistente già e password più lunga di 6 caratteri\r\n        createUserWithEmailAndPassword(auth, email.trim(), password.trim())\r\n          .then(() => {\r\n            //salvo nome e cognome\r\n            setDoc(doc(db, \"Utenti\", email.replaceAll(\".\", \"DOT\").trim()), {\r\n              nome: nome.trim(),\r\n              cognome: cognome.trim(),\r\n            });\r\n\r\n            navigation.goBack();\r\n\r\n            alert(\"Registration has been completed successfully\");\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n            alert(\"This email already exist or is invalid\");\r\n          });\r\n      } else {\r\n        alert(\"Password has to be at least 6 character\");\r\n      }\r\n    } else {\r\n      alert(\"Complete all fields\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <View\r\n      style={{\r\n        width: \"flex\",\r\n        height: \"100%\",\r\n        backgroundColor: \"#191919\",\r\n        alignItems: \"center\",\r\n      }}\r\n    >\r\n      <LinearGradient\r\n        // Background Linear Gradient\r\n        colors={['#290026','#254a3e', '#52816f']}\r\n        style={{\r\n          position: 'absolute',\r\n          left: 0,\r\n          right: 0,\r\n          top: 0,\r\n          height: \"100vh\",\r\n        }}\r\n        start={{ x: 0, y: 1 }}\r\n        end={{ x: 1, y: 1 }}\r\n      />\r\n      {/*Logo */}\r\n      <Image\r\n        resizeMode=\"center\"\r\n        style={{\r\n          width: winSize.width / 8,\r\n          height: \"250px\",\r\n        }}\r\n        source={{ uri: require(\"./assets/logo.png\") }}\r\n      ></Image>\r\n\r\n      <View\r\n        style={{\r\n          marginTop: hp(\"1%\"),\r\n          borderRadius: \"20px\",\r\n          width: winSize.width < 900 ? winSize.width - 100 : winSize.width / 3,\r\n          backgroundColor: \"transparent\",\r\n          borderWidth: \"12px\",\r\n          borderColor: \"#55e292\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        {/*SigIn Text */}\r\n        <Text\r\n          style={{\r\n            color: \"white\",\r\n            fontSize: hp(\"5%\"),\r\n            fontWeight: \"200\",\r\n            marginTop: hp(\"5%\"),\r\n          }}\r\n        >\r\n          Sign up\r\n        </Text>\r\n\r\n        {/*Input Nome */}\r\n        <TextInput\r\n          style={{\r\n            marginTop: hp(\"3%\"),\r\n            height: hp(\"5%\"),\r\n            width: winSize.width < 900 ? winSize.width / 2 : winSize.width / 4,\r\n            borderColor: \"black\",\r\n            backgroundColor: \"#cceeed\",\r\n            borderWidth: \"1px\",\r\n            borderRadius: hp(\"5%\"),\r\n            textAlign: \"center\",\r\n          }}\r\n          onChangeText={(text) => {\r\n            setNome(text);\r\n          }}\r\n          textContentType=\"name\"\r\n          placeholder=\"Name\"\r\n        ></TextInput>\r\n\r\n        {/*Input Cognome */}\r\n        <TextInput\r\n          style={{\r\n            marginTop: hp(\"3%\"),\r\n            height: hp(\"5%\"),\r\n            width: winSize.width < 900 ? winSize.width / 2 : winSize.width / 4,\r\n            borderColor: \"black\",\r\n            backgroundColor: \"#cceeed\",\r\n            borderWidth: \"1px\",\r\n            borderRadius: hp(\"5%\"),\r\n            textAlign: \"center\",\r\n          }}\r\n          onChangeText={(text) => {\r\n            setCognome(text);\r\n          }}\r\n          placeholder=\"Surname\"\r\n        ></TextInput>\r\n\r\n        {/*Input EMail */}\r\n        <TextInput\r\n          style={{\r\n            marginTop: hp(\"3%\"),\r\n            height: hp(\"5%\"),\r\n            width: winSize.width < 900 ? winSize.width / 2 : winSize.width / 4,\r\n            borderColor: \"black\",\r\n            borderWidth: \"1px\",\r\n            borderRadius: hp(\"5%\"),\r\n            textAlign: \"center\",\r\n            backgroundColor: \"#cceeed\",\r\n          }}\r\n          onChangeText={(text) => {\r\n            setEmail(text);\r\n          }}\r\n          textContentType=\"emailAddress\"\r\n          placeholder=\"Email\"\r\n        ></TextInput>\r\n\r\n        {/*Input Password */}\r\n        <TextInput\r\n          style={{\r\n            marginTop: hp(\"3%\"),\r\n            height: hp(\"5%\"),\r\n            width: winSize.width < 900 ? winSize.width / 2 : winSize.width / 4,\r\n            borderColor: \"black\",\r\n            borderWidth: \"1px\",\r\n            borderRadius: hp(\"5%\"),\r\n            textAlign: \"center\",\r\n            backgroundColor: \"#cceeed\",\r\n          }}\r\n          onChangeText={(text) => {\r\n            setPassword(text);\r\n          }}\r\n          secureTextEntry=\"true\"\r\n          passwordRules=\"true\"\r\n          placeholder=\"Password\"\r\n        ></TextInput>\r\n\r\n        {/*Pulsante Registrati */}\r\n        <TouchableOpacity\r\n          style={{\r\n            marginTop: hp(\"3%\"),\r\n            backgroundColor: \"#ff5c5c\",\r\n            width: \"150px\",\r\n            height: \"40px\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n          }}\r\n          onPress={() => {\r\n            registrati();\r\n          }}\r\n        >\r\n          <View>\r\n            <Text style={{ color: \"white\" }}>Send</Text>\r\n          </View>\r\n        </TouchableOpacity>\r\n\r\n        {/*goBack pulsante */}\r\n        <TouchableOpacity\r\n          style={{ marginTop: hp(\"2%\"), marginBottom: hp(\"5%\") }}\r\n          onPress={() => navigation.goBack()}\r\n        >\r\n          <Text style={{ fontSize: hp(\"2%\"), fontWeight: 200, color: \"white\" }}>\r\n            Go back\r\n          </Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default SigIn;\r\n","import { StatusBar } from \"expo-status-bar\";\r\nimport * as React from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  TouchableOpacity,\r\n  useWindowDimensions,\r\n  ActivityIndicator,\r\n  TextInput,\r\n  Image,\r\n  ScrollView,\r\n} from \"react-native\";\r\nimport { NavigationContainer } from \"@react-navigation/native\";\r\nimport { createNativeStackNavigator } from \"@react-navigation/native-stack\";\r\nimport {\r\n  widthPercentageToDP as wp,\r\n  heightPercentageToDP as hp,\r\n} from \"react-native-responsive-screen\";\r\nimport {\r\n  addDoc,\r\n  doc,\r\n  collection,\r\n  getFirestore,\r\n  getDocs,\r\n  query,\r\n  deleteDoc,\r\n  orderBy,\r\n  startAfter,\r\n  limit,\r\n  startAt,\r\n  endBefore,\r\n  updateDoc,\r\n  setDoc,\r\n  getDoc,\r\n  where,\r\n  increment,\r\n} from \"firebase/firestore/\";\r\nimport Spinner from \"react-native-loading-spinner-overlay\";\r\nimport Icon from \"react-native-vector-icons/MaterialCommunityIcons\";\r\nimport { WebView } from \"react-native-webview\";\r\n\r\nconst Settings = ({ route, navigation }) => {\r\n  //per dimensioni finestra in real time\r\n  const winSize = useWindowDimensions();\r\n\r\n  //inizializzo databse firebase\r\n  const db = getFirestore();\r\n\r\n  //inizializzo overlay caricamento\r\n  let [spinnerVisible, setSpinnerVisibile] = React.useState(false);\r\n\r\n  return (\r\n    <ScrollView\r\n      style={{ backgroundColor: \"#191919\" }}\r\n      contentContainerStyle={{\r\n        width: \"flex\",\r\n        backgroundColor: \"#191919\",\r\n        alignItems: \"center\",\r\n      }}\r\n    >\r\n      {/*overlay loading */}\r\n      <Spinner\r\n        visible={spinnerVisible}\r\n        textStyle={{ color: \"white\" }}\r\n        children={\r\n          <View\r\n            style={{\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n            }}\r\n          >\r\n            {/*Spinner */}\r\n            <ActivityIndicator\r\n              color={\"white\"}\r\n              size={\"large\"}\r\n            ></ActivityIndicator>\r\n          </View>\r\n        }\r\n      />\r\n\r\n      {/*Logo */}\r\n\r\n      <Image\r\n        resizeMode=\"center\"\r\n        style={{\r\n          width: winSize.width / 2,\r\n          height: \"50px\",\r\n          marginTop: \"10px\",\r\n          marginBottom: \"50px\",\r\n        }}\r\n        source={{ uri: require(\"./assets/logo.png\") }}\r\n      ></Image>\r\n\r\n      {/*Nome e cognome utente */}\r\n      <Text\r\n        style={{\r\n          color: \"white\",\r\n          fontSize:\r\n            winSize.width < 900 ? winSize.width / 30 : winSize.width / 40,\r\n          fontWeight: \"400\",\r\n          marginTop: hp(\"-2%\"),\r\n        }}\r\n      >\r\n        {route.params.email}\r\n      </Text>\r\n\r\n      <View\r\n        style={{\r\n          width: \"100%\",\r\n          justifyContent: \"center\",\r\n          flexDirection: \"row\",\r\n          height: \"5%\",\r\n          marginTop: hp(\"3%\"),\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        {/*Pulsante back */}\r\n        <TouchableOpacity\r\n          style={{\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n          }}\r\n          onPress={() => {\r\n            navigation.goBack();\r\n          }}\r\n        >\r\n          <Icon name=\"keyboard-backspace\" color={\"white\"} size={30} />\r\n          <Text style={{ color: \"white\", fontWeight: 200 }}>Back</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n\r\n      <View\r\n        style={{\r\n          borderRadius: \"20px\",\r\n          backgroundColor: \"#2b2b2b\",\r\n          width: \"70%\",\r\n          alignItems: \"center\",\r\n          marginTop: winSize.height / 20,\r\n        }}\r\n      >\r\n        {/*Info */}\r\n        <Text\r\n          style={{\r\n            color: \"white\",\r\n            textAlign: \"center\",\r\n            width: winSize.width / 2,\r\n            marginTop: \"5%\",\r\n            fontSize: winSize.width / 40,\r\n          }}\r\n          \r\n        >\r\n          We are an open-source, user-controlled, encrypted, decentralized storage app for passwords, files and private data.\r\n\r\n Files are encrypted using the AES algorithm.{\"\\n\"}\r\n                  </Text>\r\n\r\n        {/*Testo follow the project on */}\r\n        <Text\r\n          style={{\r\n            color: \"white\",\r\n            fontWeight: \"bold\",\r\n            fontSize: \"20px\",\r\n            marginTop: \"5%\",\r\n          }}\r\n        >\r\n          Follow us on\r\n        </Text>\r\n\r\n        <View\r\n          style={{\r\n            width: \"100%\",\r\n            alignItems: \"center\",\r\n            flexDirection: \"row\",\r\n            justifyContent: \"center\",\r\n          }}\r\n        >\r\n          <TouchableOpacity\r\n            style={{\r\n              marginTop: hp(\"3%\"),\r\n              marginBottom: \"3%\",\r\n              justifyContent: \"center\",\r\n              alignItems: \"center\",\r\n            }}\r\n            onPress={async () => {\r\n              let telegram = window.open();\r\n              telegram.location.href = \"https://www.instagram.com/ounnspace/\";\r\n            }}\r\n          >\r\n            <Image\r\n              style={{\r\n                width: winSize.width > 900 ? \"50px\" : \"40px\",\r\n                height: winSize.width > 900 ? \"50px\" : \"40px\",\r\n                resizeMode: \"cover\",\r\n              }}\r\n              source={{ uri: require(\"./assets/Instagram.png\") }}\r\n            ></Image>\r\n          </TouchableOpacity>\r\n\r\n          <TouchableOpacity\r\n            style={{\r\n              marginTop: hp(\"3%\"),\r\n              marginBottom: \"3%\",\r\n              marginLeft: \"2%\",\r\n              justifyContent: \"center\",\r\n              alignItems: \"center\",\r\n            }}\r\n            onPress={async () => {\r\n              let telegram = window.open();\r\n              telegram.location.href =\r\n                \"https://www.linkedin.com/company/ounn/\";\r\n            }}\r\n          >\r\n            <Image\r\n              style={{\r\n                width: winSize.width > 900 ? \"44px\" : \"34px\",\r\n                height: winSize.width > 900 ? \"44px\" : \"34px\",\r\n                resizeMode: \"cover\",\r\n              }}\r\n              source={{ uri: require(\"./assets/linkedin.png\") }}\r\n            ></Image>\r\n          </TouchableOpacity>\r\n        </View>\r\n\r\n        <View style={{ width: \"100%\", height: \"10%\" }}></View>\r\n      </View>\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\nexport default Settings;\r\n","import { StatusBar } from \"expo-status-bar\";\r\nimport * as React from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  TouchableOpacity,\r\n  useWindowDimensions,\r\n  ActivityIndicator,\r\n  TextInput,\r\n  Image,\r\n  ScrollView,\r\n} from \"react-native\";\r\nimport { NavigationContainer } from \"@react-navigation/native\";\r\nimport { createNativeStackNavigator } from \"@react-navigation/native-stack\";\r\nimport {\r\n  widthPercentageToDP as wp,\r\n  heightPercentageToDP as hp,\r\n} from \"react-native-responsive-screen\";\r\nimport {\r\n  addDoc,\r\n  doc,\r\n  collection,\r\n  getFirestore,\r\n  getDocs,\r\n  query,\r\n  deleteDoc,\r\n  orderBy,\r\n  startAfter,\r\n  limit,\r\n  startAt,\r\n  endBefore,\r\n  updateDoc,\r\n  setDoc,\r\n  getDoc,\r\n  where,\r\n  increment,\r\n} from \"firebase/firestore/\";\r\nimport Spinner from \"react-native-loading-spinner-overlay\";\r\nimport Icon from \"react-native-vector-icons/MaterialCommunityIcons\";\r\nimport { WebView } from \"react-native-webview\";\r\nimport axios from \"axios\";\r\n\r\nconst FileInfo = ({ route, navigation }) => {\r\n  //per dimensioni finestra in real time\r\n  const winSize = useWindowDimensions();\r\n\r\n  //inizializzo databse firebase\r\n  const db = getFirestore();\r\n\r\n  //inizializzo overlay caricamento\r\n  let [spinnerVisible, setSpinnerVisibile] = React.useState(false);\r\n\r\n  //stato file\r\n  let [stato, setStato] = React.useState(\"\");\r\n\r\n  React.useEffect(async () => {\r\n    let status = await axios.get(\r\n      \"https://api.web3.storage/status/\" + route.params.cid\r\n    );\r\n\r\n    if (status.data.deals.length > 0) setStato(\"Pinned\");\r\n    else setStato(\"Queuing\");\r\n  }, []);\r\n\r\n  return (\r\n    <ScrollView\r\n      style={{ backgroundColor: \"#191919\" }}\r\n      contentContainerStyle={{\r\n        width: \"flex\",\r\n        backgroundColor: \"#191919\",\r\n        alignItems: \"center\",\r\n      }}\r\n    >\r\n      {/*overlay loading */}\r\n      <Spinner\r\n        visible={spinnerVisible}\r\n        textStyle={{ color: \"white\" }}\r\n        children={\r\n          <View\r\n            style={{\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n            }}\r\n          >\r\n            {/*Spinner */}\r\n            <ActivityIndicator\r\n              color={\"white\"}\r\n              size={\"large\"}\r\n            ></ActivityIndicator>\r\n          </View>\r\n        }\r\n      />\r\n\r\n      {/*Logo */}\r\n      <Image\r\n        resizeMode=\"center\"\r\n        style={{\r\n          width: winSize.width / 2,\r\n          height: \"250px\",\r\n          marginTop: \"-20px\",\r\n        }}\r\n        source={{ uri: require(\"./assets/logo.png\") }}\r\n      ></Image>\r\n\r\n      {/*Nome e cognome utente */}\r\n      <Text\r\n        style={{\r\n          color: \"white\",\r\n          fontSize:\r\n            winSize.width < 900 ? winSize.width / 30 : winSize.width / 40,\r\n          fontWeight: \"400\",\r\n          marginTop: hp(\"-2%\"),\r\n        }}\r\n      >\r\n        {route.params.email}\r\n      </Text>\r\n\r\n      <View\r\n        style={{\r\n          width: \"100%\",\r\n          justifyContent: \"center\",\r\n          flexDirection: \"row\",\r\n          height: \"5%\",\r\n          marginTop: hp(\"3%\"),\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        {/*Pulsante back */}\r\n        <TouchableOpacity\r\n          style={{\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n          }}\r\n          onPress={() => {\r\n            navigation.goBack();\r\n          }}\r\n        >\r\n          <Icon name=\"keyboard-backspace\" color={\"white\"} size={30} />\r\n          <Text style={{ color: \"white\", fontWeight: 200 }}>Back</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n\r\n      {/*Immagine documento */}\r\n      <Image\r\n        source={require(\"./assets/file.png\")}\r\n        style={{\r\n          width: \"90px\",\r\n          aspectRatio: 0.7,\r\n          height: \"110px\",\r\n          borderRadius: hp(\"5%\"),\r\n          marginTop: \"5%\",\r\n        }}\r\n      />\r\n\r\n      {/*Testo status */}\r\n      <Text\r\n        style={{\r\n          color: \"white\",\r\n          fontWeight: \"bold\",\r\n          fontSize: \"25px\",\r\n          marginTop: \"3%\",\r\n        }}\r\n      >\r\n        Status\r\n      </Text>\r\n      {/* status */}\r\n      <Text\r\n        style={{\r\n          color: stato == \"Pinned\" ? \"green\" : \"red\",\r\n          fontSize: \"20px\",\r\n          marginTop: \"1%\",\r\n          fontWeight: \"200\",\r\n        }}\r\n      >\r\n        {stato}\r\n      </Text>\r\n\r\n      {/*Testo nome */}\r\n      <Text\r\n        style={{\r\n          color: \"white\",\r\n          fontWeight: \"bold\",\r\n          fontSize: \"25px\",\r\n          marginTop: \"3%\",\r\n        }}\r\n      >\r\n        Name\r\n      </Text>\r\n      {/* nome */}\r\n      <Text\r\n        style={{\r\n          color: \"white\",\r\n          fontSize: \"20px\",\r\n          marginTop: \"1%\",\r\n          fontWeight: \"200\",\r\n        }}\r\n      >\r\n        {route.params.name}\r\n      </Text>\r\n\r\n      {/*Testo size */}\r\n      <Text\r\n        style={{\r\n          color: \"white\",\r\n          fontWeight: \"bold\",\r\n          fontSize: \"25px\",\r\n          marginTop: \"3%\",\r\n        }}\r\n      >\r\n        Size\r\n      </Text>\r\n      {/* size */}\r\n      <Text\r\n        style={{\r\n          color: \"white\",\r\n          fontSize: \"20px\",\r\n          marginTop: \"1%\",\r\n          fontWeight: \"200\",\r\n        }}\r\n      >\r\n        {(route.params.size / 1000000).toFixed(2) + \"MB\"}\r\n      </Text>\r\n\r\n      {/*Testo loading date */}\r\n      <Text\r\n        style={{\r\n          color: \"white\",\r\n          fontWeight: \"bold\",\r\n          fontSize: \"25px\",\r\n          marginTop: \"3%\",\r\n        }}\r\n      >\r\n        Loading date\r\n      </Text>\r\n      {/* date */}\r\n      <Text\r\n        style={{\r\n          color: \"white\",\r\n          fontSize: \"20px\",\r\n          marginTop: \"1%\",\r\n          fontWeight: \"200\",\r\n          marginBottom: \"2%\",\r\n        }}\r\n      >\r\n        {new Date(route.params.data).toLocaleString()}\r\n      </Text>\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\nexport default FileInfo;\r\n","module.exports = __webpack_public_path__ + \"static/media/filePublic.2537e54c.png\";","module.exports = __webpack_public_path__ + \"static/media/folder.5107a6da.png\";","module.exports = __webpack_public_path__ + \"static/media/upload_button.8a26790a.png\";","module.exports = __webpack_public_path__ + \"static/media/Instagram.07bf95fe.png\";","module.exports = __webpack_public_path__ + \"static/media/linkedin.bcac093a.png\";","// Import the functions you need from the SDKs you need\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDxqS-2MmrVRbhmg49Bx2P1b4f_lFeSkQ0\",\n  authDomain: \"ounn-ea631.firebaseapp.com\",\n  databaseURL: \"https://ounn-ea631-default-rtdb.firebaseio.com\",\n  projectId: \"ounn-ea631\",\n  storageBucket: \"ounn-ea631.appspot.com\",\n  messagingSenderId: \"111990065034\",\n  appId: \"1:111990065034:web:1b1a4a2fd6d9aef5db6a73\",\n  measurementId: \"G-YL3CYJJN58\"\n};\n\n\nconst Web3StorageToken = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweGE4MjU5MDcyYkUxRmEwODhhZTA3MTI3OTg2NDVEY0VBRjFGNDMzREQiLCJpc3MiOiJ3ZWIzLXN0b3JhZ2UiLCJpYXQiOjE2NTgyMjcyNTE1MTgsIm5hbWUiOiJvbm4ifQ.6AAz_KHuowFfJcxlf0jHbRoVEAKMv6iER_WSYkaUtr0\";\n\n\nexport default { firebaseConfig, Web3StorageToken };"],"sourceRoot":""}